import{c as Je,d as q,R as N,aQ as wt,r as p,T as cr,Q as ve,aR as dr,j as e,aS as Se,aT as Fe,aU as te,aV as J,N as ur,aW as mr,aX as At,l as Ue,aN as Pt,ax as kt,X as Qe,g as hr,h as pr,u as we,e as Y,C as j,f as M,i as B,a as y,a8 as ce,a9 as de,aa as ue,ab as me,ac as z,I as Ee,S as re,aY as Me,m as he,aJ as Ot,Y as Ae,Z as Pe,_ as K,$ as k,a0 as ke,a1 as O,ae as xr,k as Tt,al as fr,n as Oe}from"./index-BrpuEMYd.js";import{T as gr,a as br,b as ne,c as ae}from"./tabs-DKFq25_i.js";import{D as vr}from"./date-filter-B1ru7pBr.js";import{D as jr}from"./download-B5zbgWvm.js";import{f as C,_ as Rt,r as Dt,s as yr,t as Nr,k as Q,v as et,w as H,L as F,x as Et,y as tt,z as Ct,D as Sr,C as wr,b as pe,g as se,S as Ar,A as Pr,E as kr,a as dt,d as Or,i as ie,e as Tr,G as Rr,F as Dr,H as _t,I as Er,J as Te,K as ut,M as Re,u as Cr,l as _r,N as Lr,R as Lt,B as Ir,o as $r,X as Fr,Y as Mr,T as It,p as Ye,q as Br}from"./BarChart-D5ShTKl6.js";import{F as $t}from"./file-spreadsheet-Cn6VVODI.js";import{D as Vr}from"./dollar-sign-Dh7coXMs.js";import{f as mt}from"./format-BEMO4FpZ.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=Je("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=Je("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=Je("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);var zr=["points","className","baseLinePoints","connectNulls"];function oe(){return oe=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},oe.apply(this,arguments)}function Hr(t,r){if(t==null)return{};var a=Yr(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Yr(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}function ht(t){return Gr(t)||qr(t)||Xr(t)||Ur()}function Ur(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xr(t,r){if(t){if(typeof t=="string")return Xe(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Xe(t,r)}}function qr(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gr(t){if(Array.isArray(t))return Xe(t)}function Xe(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}var pt=function(r){return r&&r.x===+r.x&&r.y===+r.y},Zr=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return r.forEach(function(n){pt(n)?a[a.length-1].push(n):a[a.length-1].length>0&&a.push([])}),pt(r[0])&&a[a.length-1].push(r[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},ye=function(r,a){var n=Zr(r);a&&(n=[n.reduce(function(o,i){return[].concat(ht(o),ht(i))},[])]);var s=n.map(function(o){return o.reduce(function(i,l,u){return"".concat(i).concat(u===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},Jr=function(r,a,n){var s=ye(r,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(ye(a.reverse(),n).slice(1))},Qr=function(r){var a=r.points,n=r.className,s=r.baseLinePoints,o=r.connectNulls,i=Hr(r,zr);if(!a||!a.length)return null;var l=q("recharts-polygon",n);if(s&&s.length){var u=i.stroke&&i.stroke!=="none",d=Jr(a,s,o);return N.createElement("g",{className:l},N.createElement("path",oe({},C(i,!0),{fill:d.slice(-1)==="Z"?i.fill:"none",stroke:"none",d})),u?N.createElement("path",oe({},C(i,!0),{fill:"none",d:ye(a,o)})):null,u?N.createElement("path",oe({},C(i,!0),{fill:"none",d:ye(s,o)})):null)}var c=ye(a,o);return N.createElement("path",oe({},C(i,!0),{fill:c.slice(-1)==="Z"?i.fill:"none",className:l,d:c}))},en=Rt,tn=yr,rn=Dt;function nn(t,r){return t&&t.length?en(t,rn(r),tn):void 0}var an=nn;const sn=wt(an);var on=Rt,ln=Dt,cn=Nr;function dn(t,r){return t&&t.length?on(t,ln(r),cn):void 0}var un=dn;const mn=wt(un);var hn=["cx","cy","angle","ticks","axisLine"],pn=["ticks","tick","angle","tickFormatter","stroke"];function xe(t){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xe(t)}function Ne(){return Ne=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Ne.apply(this,arguments)}function xt(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function G(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?xt(Object(a),!0).forEach(function(n){Be(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):xt(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function ft(t,r){if(t==null)return{};var a=xn(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function xn(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}function fn(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function gt(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bt(n.key),n)}}function gn(t,r,a){return r&&gt(t.prototype,r),a&&gt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function bn(t,r,a){return r=Ce(r),vn(t,Mt()?Reflect.construct(r,a||[],Ce(t).constructor):r.apply(t,a))}function vn(t,r){if(r&&(xe(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jn(t)}function jn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mt=function(){return!!t})()}function Ce(t){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ce(t)}function yn(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&qe(t,r)}function qe(t,r){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},qe(t,r)}function Be(t,r,a){return r=Bt(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Bt(t){var r=Nn(t,"string");return xe(r)=="symbol"?r:r+""}function Nn(t,r){if(xe(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r||"default");if(xe(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Ve=function(t){function r(){return fn(this,r),bn(this,r,arguments)}return yn(r,t),gn(r,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,o=this.props,i=o.angle,l=o.cx,u=o.cy;return H(l,u,s,i)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,o=n.cy,i=n.angle,l=n.ticks,u=sn(l,function(c){return c.coordinate||0}),d=mn(l,function(c){return c.coordinate||0});return{cx:s,cy:o,startAngle:i,endAngle:i,innerRadius:d.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,o=n.cy,i=n.angle,l=n.ticks,u=n.axisLine,d=ft(n,hn),c=l.reduce(function(b,m){return[Math.min(b[0],m.coordinate),Math.max(b[1],m.coordinate)]},[1/0,-1/0]),x=H(s,o,c[0],i),h=H(s,o,c[1],i),g=G(G(G({},C(d,!1)),{},{fill:"none"},C(u,!1)),{},{x1:x.x,y1:x.y,x2:h.x,y2:h.y});return N.createElement("line",Ne({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var n=this,s=this.props,o=s.ticks,i=s.tick,l=s.angle,u=s.tickFormatter,d=s.stroke,c=ft(s,pn),x=this.getTickTextAnchor(),h=C(c,!1),g=C(i,!1),b=o.map(function(m,v){var w=n.getTickValueCoord(m),A=G(G(G(G({textAnchor:x,transform:"rotate(".concat(90-l,", ").concat(w.x,", ").concat(w.y,")")},h),{},{stroke:"none",fill:d},g),{},{index:v},w),{},{payload:m});return N.createElement(F,Ne({className:q("recharts-polar-radius-axis-tick",Et(i)),key:"tick-".concat(m.coordinate)},tt(n.props,m,v)),r.renderTickItem(i,A,u?u(m.value,v):m.value))});return N.createElement(F,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,s=n.ticks,o=n.axisLine,i=n.tick;return!s||!s.length?null:N.createElement(F,{className:q("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),i&&this.renderTicks(),Ct.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,o){var i;return N.isValidElement(n)?i=N.cloneElement(n,s):Q(n)?i=n(s):i=N.createElement(et,Ne({},s,{className:"recharts-polar-radius-axis-tick-value"}),o),i}}])}(p.PureComponent);Be(Ve,"displayName","PolarRadiusAxis");Be(Ve,"axisType","radiusAxis");Be(Ve,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function fe(t){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fe(t)}function ee(){return ee=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},ee.apply(this,arguments)}function bt(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function Z(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?bt(Object(a),!0).forEach(function(n){Ke(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):bt(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Sn(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function vt(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kt(n.key),n)}}function wn(t,r,a){return r&&vt(t.prototype,r),a&&vt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function An(t,r,a){return r=_e(r),Pn(t,Vt()?Reflect.construct(r,a||[],_e(t).constructor):r.apply(t,a))}function Pn(t,r){if(r&&(fe(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kn(t)}function kn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vt=function(){return!!t})()}function _e(t){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},_e(t)}function On(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Ge(t,r)}function Ge(t,r){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Ge(t,r)}function Ke(t,r,a){return r=Kt(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Kt(t){var r=Tn(t,"string");return fe(r)=="symbol"?r:r+""}function Tn(t,r){if(fe(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r||"default");if(fe(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Rn=Math.PI/180,jt=1e-5,We=function(t){function r(){return Sn(this,r),An(this,r,arguments)}return On(r,t),wn(r,[{key:"getTickLineCoord",value:function(n){var s=this.props,o=s.cx,i=s.cy,l=s.radius,u=s.orientation,d=s.tickSize,c=d||8,x=H(o,i,l,n.coordinate),h=H(o,i,l+(u==="inner"?-1:1)*c,n.coordinate);return{x1:x.x,y1:x.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,o=Math.cos(-n.coordinate*Rn),i;return o>jt?i=s==="outer"?"start":"end":o<-jt?i=s==="outer"?"end":"start":i="middle",i}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,o=n.cy,i=n.radius,l=n.axisLine,u=n.axisLineType,d=Z(Z({},C(this.props,!1)),{},{fill:"none"},C(l,!1));if(u==="circle")return N.createElement(Sr,ee({className:"recharts-polar-angle-axis-line"},d,{cx:s,cy:o,r:i}));var c=this.props.ticks,x=c.map(function(h){return H(s,o,i,h.coordinate)});return N.createElement(Qr,ee({className:"recharts-polar-angle-axis-line"},d,{points:x}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,o=s.ticks,i=s.tick,l=s.tickLine,u=s.tickFormatter,d=s.stroke,c=C(this.props,!1),x=C(i,!1),h=Z(Z({},c),{},{fill:"none"},C(l,!1)),g=o.map(function(b,m){var v=n.getTickLineCoord(b),w=n.getTickTextAnchor(b),A=Z(Z(Z({textAnchor:w},c),{},{stroke:"none",fill:d},x),{},{index:m,payload:b,x:v.x2,y:v.y2});return N.createElement(F,ee({className:q("recharts-polar-angle-axis-tick",Et(i)),key:"tick-".concat(b.coordinate)},tt(n.props,b,m)),l&&N.createElement("line",ee({className:"recharts-polar-angle-axis-tick-line"},h,v)),i&&r.renderTickItem(i,A,u?u(b.value,m):b.value))});return N.createElement(F,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,s=n.ticks,o=n.radius,i=n.axisLine;return o<=0||!s||!s.length?null:N.createElement(F,{className:q("recharts-polar-angle-axis",this.props.className)},i&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,o){var i;return N.isValidElement(n)?i=N.cloneElement(n,s):Q(n)?i=n(s):i=N.createElement(et,ee({},s,{className:"recharts-polar-angle-axis-tick-value"}),o),i}}])}(p.PureComponent);Ke(We,"displayName","PolarAngleAxis");Ke(We,"axisType","angleAxis");Ke(We,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var De;function ge(t){"@babel/helpers - typeof";return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ge(t)}function le(){return le=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},le.apply(this,arguments)}function yt(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function P(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?yt(Object(a),!0).forEach(function(n){L(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):yt(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Dn(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Nt(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zt(n.key),n)}}function En(t,r,a){return r&&Nt(t.prototype,r),a&&Nt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cn(t,r,a){return r=Le(r),_n(t,Wt()?Reflect.construct(r,a||[],Le(t).constructor):r.apply(t,a))}function _n(t,r){if(r&&(ge(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ln(t)}function Ln(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wt=function(){return!!t})()}function Le(t){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Le(t)}function In(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Ze(t,r)}function Ze(t,r){return Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Ze(t,r)}function L(t,r,a){return r=zt(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function zt(t){var r=$n(t,"string");return ge(r)=="symbol"?r:r+""}function $n(t,r){if(ge(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r||"default");if(ge(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var U=function(t){function r(a){var n;return Dn(this,r),n=Cn(this,r,[a]),L(n,"pieRef",null),L(n,"sectorRefs",[]),L(n,"id",Cr("recharts-pie-")),L(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Q(s)&&s()}),L(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Q(s)&&s()}),n.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},n}return In(r,t),En(r,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.label,l=o.labelLine,u=o.dataKey,d=o.valueKey,c=C(this.props,!1),x=C(i,!1),h=C(l,!1),g=i&&i.offsetRadius||20,b=n.map(function(m,v){var w=(m.startAngle+m.endAngle)/2,A=H(m.cx,m.cy,m.outerRadius+g,w),D=P(P(P(P({},c),m),{},{stroke:"none"},x),{},{index:v,textAnchor:r.getTextAnchor(A.x,m.cx)},A),_=P(P(P(P({},c),m),{},{fill:"none",stroke:m.fill},h),{},{index:v,points:[H(m.cx,m.cy,m.outerRadius,w),A]}),f=u;return pe(u)&&pe(d)?f="value":pe(u)&&(f=d),N.createElement(F,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(v)},l&&r.renderLabelLineItem(l,_,"line"),r.renderLabelItem(i,D,se(m,f)))});return N.createElement(F,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(n){var s=this,o=this.props,i=o.activeShape,l=o.blendStroke,u=o.inactiveShape;return n.map(function(d,c){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&n.length!==1)return null;var x=s.isActiveIndex(c),h=u&&s.hasActiveIndex()?u:null,g=x?i:h,b=P(P({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return N.createElement(F,le({ref:function(v){v&&!s.sectorRefs.includes(v)&&s.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},tt(s.props,d,c),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(c)}),N.createElement(Ar,le({option:g,isActive:x,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,o=s.sectors,i=s.isAnimationActive,l=s.animationBegin,u=s.animationDuration,d=s.animationEasing,c=s.animationId,x=this.state,h=x.prevSectors,g=x.prevIsAnimationActive;return N.createElement(Pr,{begin:l,duration:u,isActive:i,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(c,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var m=b.t,v=[],w=o&&o[0],A=w.startAngle;return o.forEach(function(D,_){var f=h&&h[_],S=_>0?kr(D,"paddingAngle",0):0;if(f){var V=dt(f.endAngle-f.startAngle,D.endAngle-D.startAngle),E=P(P({},D),{},{startAngle:A+S,endAngle:A+V(m)+S});v.push(E),A=E.endAngle}else{var T=D.endAngle,R=D.startAngle,$=dt(0,T-R),je=$(m),X=P(P({},D),{},{startAngle:A+S,endAngle:A+je+S});v.push(X),A=X.endAngle}}),N.createElement(F,null,n.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var i=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[i].focus(),s.setState({sectorToFocus:i});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,o=n.isAnimationActive,i=this.state.prevSectors;return o&&s&&s.length&&(!i||!Or(i,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,o=s.hide,i=s.sectors,l=s.className,u=s.label,d=s.cx,c=s.cy,x=s.innerRadius,h=s.outerRadius,g=s.isAnimationActive,b=this.state.isAnimationFinished;if(o||!i||!i.length||!ie(d)||!ie(c)||!ie(x)||!ie(h))return null;var m=q("recharts-pie",l);return N.createElement(F,{tabIndex:this.props.rootTabIndex,className:m,ref:function(w){n.pieRef=w}},this.renderSectors(),u&&this.renderLabels(i),Ct.renderCallByParent(this.props,null,!1),(!g||b)&&Tr.renderCallByParent(this.props,i,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,o){if(N.isValidElement(n))return N.cloneElement(n,s);if(Q(n))return n(s);var i=q("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return N.createElement(wr,le({},s,{key:o,type:"linear",className:i}))}},{key:"renderLabelItem",value:function(n,s,o){if(N.isValidElement(n))return N.cloneElement(n,s);var i=o;if(Q(n)&&(i=n(s),N.isValidElement(i)))return i;var l=q("recharts-pie-label-text",typeof n!="boolean"&&!Q(n)?n.className:"");return N.createElement(et,le({},s,{alignmentBaseline:"middle",className:l}),i)}}])}(p.PureComponent);De=U;L(U,"displayName","Pie");L(U,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Rr.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});L(U,"parseDeltaAngle",function(t,r){var a=Re(r-t),n=Math.min(Math.abs(r-t),360);return a*n});L(U,"getRealPieData",function(t){var r=t.data,a=t.children,n=C(t,!1),s=Dr(a,_t);return r&&r.length?r.map(function(o,i){return P(P(P({payload:o},n),o),s&&s[i]&&s[i].props)}):s&&s.length?s.map(function(o){return P(P({},n),o.props)}):[]});L(U,"parseCoordinateOfPie",function(t,r){var a=r.top,n=r.left,s=r.width,o=r.height,i=Er(s,o),l=n+Te(t.cx,s,s/2),u=a+Te(t.cy,o,o/2),d=Te(t.innerRadius,i,0),c=Te(t.outerRadius,i,i*.8),x=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:l,cy:u,innerRadius:d,outerRadius:c,maxRadius:x}});L(U,"getComposedData",function(t){var r=t.item,a=t.offset,n=r.type.defaultProps!==void 0?P(P({},r.type.defaultProps),r.props):r.props,s=De.getRealPieData(n);if(!s||!s.length)return null;var o=n.cornerRadius,i=n.startAngle,l=n.endAngle,u=n.paddingAngle,d=n.dataKey,c=n.nameKey,x=n.valueKey,h=n.tooltipType,g=Math.abs(n.minAngle),b=De.parseCoordinateOfPie(n,a),m=De.parseDeltaAngle(i,l),v=Math.abs(m),w=d;pe(d)&&pe(x)?(ut(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w="value"):pe(d)&&(ut(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w=x);var A=s.filter(function(E){return se(E,w,0)!==0}).length,D=(v>=360?A:A-1)*u,_=v-A*g-D,f=s.reduce(function(E,T){var R=se(T,w,0);return E+(ie(R)?R:0)},0),S;if(f>0){var V;S=s.map(function(E,T){var R=se(E,w,0),$=se(E,c,T),je=(ie(R)?R:0)/f,X;T?X=V.endAngle+Re(m)*u*(R!==0?1:0):X=i;var ot=X+Re(m)*((R!==0?g:0)+je*_),lt=(X+ot)/2,ct=(b.innerRadius+b.outerRadius)/2,or=[{name:$,value:R,payload:E,dataKey:w,type:h}],lr=H(b.cx,b.cy,ct,lt);return V=P(P(P({percent:je,cornerRadius:o,name:$,tooltipPayload:or,midAngle:lt,middleRadius:ct,tooltipPosition:lr},E),b),{},{value:se(E,w),startAngle:X,endAngle:ot,payload:E,paddingAngle:Re(m)*u}),V})}return P(P({},b),{},{sectors:S,data:s})});var Fn=_r({chartName:"PieChart",GraphicalChild:U,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:We},{axisType:"radiusAxis",AxisComp:Ve}],formatAxisMap:Lr,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function Mn(t,r){return p.useReducer((a,n)=>r[a][n]??a,t)}var rt="ScrollArea",[Ht,ha]=cr(rt),[Bn,I]=Ht(rt),Yt=p.forwardRef((t,r)=>{const{__scopeScrollArea:a,type:n="hover",dir:s,scrollHideDelay:o=600,...i}=t,[l,u]=p.useState(null),[d,c]=p.useState(null),[x,h]=p.useState(null),[g,b]=p.useState(null),[m,v]=p.useState(null),[w,A]=p.useState(0),[D,_]=p.useState(0),[f,S]=p.useState(!1),[V,E]=p.useState(!1),T=ve(r,$=>u($)),R=dr(s);return e.jsx(Bn,{scope:a,type:n,dir:R,scrollHideDelay:o,scrollArea:l,viewport:d,onViewportChange:c,content:x,onContentChange:h,scrollbarX:g,onScrollbarXChange:b,scrollbarXEnabled:f,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:v,scrollbarYEnabled:V,onScrollbarYEnabledChange:E,onCornerWidthChange:A,onCornerHeightChange:_,children:e.jsx(Se.div,{dir:R,...i,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":D+"px",...t.style}})})});Yt.displayName=rt;var Ut="ScrollAreaViewport",Xt=p.forwardRef((t,r)=>{const{__scopeScrollArea:a,children:n,nonce:s,...o}=t,i=I(Ut,a),l=p.useRef(null),u=ve(r,l,i.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),e.jsx(Se.div,{"data-radix-scroll-area-viewport":"",...o,ref:u,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});Xt.displayName=Ut;var W="ScrollAreaScrollbar",nt=p.forwardRef((t,r)=>{const{forceMount:a,...n}=t,s=I(W,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=s,l=t.orientation==="horizontal";return p.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),s.type==="hover"?e.jsx(Vn,{...n,ref:r,forceMount:a}):s.type==="scroll"?e.jsx(Kn,{...n,ref:r,forceMount:a}):s.type==="auto"?e.jsx(qt,{...n,ref:r,forceMount:a}):s.type==="always"?e.jsx(at,{...n,ref:r}):null});nt.displayName=W;var Vn=p.forwardRef((t,r)=>{const{forceMount:a,...n}=t,s=I(W,t.__scopeScrollArea),[o,i]=p.useState(!1);return p.useEffect(()=>{const l=s.scrollArea;let u=0;if(l){const d=()=>{window.clearTimeout(u),i(!0)},c=()=>{u=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",c)}}},[s.scrollArea,s.scrollHideDelay]),e.jsx(Fe,{present:a||o,children:e.jsx(qt,{"data-state":o?"visible":"hidden",...n,ref:r})})}),Kn=p.forwardRef((t,r)=>{const{forceMount:a,...n}=t,s=I(W,t.__scopeScrollArea),o=t.orientation==="horizontal",i=He(()=>u("SCROLL_END"),100),[l,u]=Mn("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,s.scrollHideDelay,u]),p.useEffect(()=>{const d=s.viewport,c=o?"scrollLeft":"scrollTop";if(d){let x=d[c];const h=()=>{const g=d[c];x!==g&&(u("SCROLL"),i()),x=g};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,o,u,i]),e.jsx(Fe,{present:a||l!=="hidden",children:e.jsx(at,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:r,onPointerEnter:te(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:te(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),qt=p.forwardRef((t,r)=>{const a=I(W,t.__scopeScrollArea),{forceMount:n,...s}=t,[o,i]=p.useState(!1),l=t.orientation==="horizontal",u=He(()=>{if(a.viewport){const d=a.viewport.offsetWidth<a.viewport.scrollWidth,c=a.viewport.offsetHeight<a.viewport.scrollHeight;i(l?d:c)}},10);return be(a.viewport,u),be(a.content,u),e.jsx(Fe,{present:n||o,children:e.jsx(at,{"data-state":o?"visible":"hidden",...s,ref:r})})}),at=p.forwardRef((t,r)=>{const{orientation:a="vertical",...n}=t,s=I(W,t.__scopeScrollArea),o=p.useRef(null),i=p.useRef(0),[l,u]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=er(l.viewport,l.content),c={...n,sizes:l,onSizesChange:u,hasThumb:d>0&&d<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:h=>i.current=h};function x(h,g){return Xn(h,i.current,l,g)}return a==="horizontal"?e.jsx(Wn,{...c,ref:r,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,g=St(h,l,s.dir);o.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=x(h,s.dir))}}):a==="vertical"?e.jsx(zn,{...c,ref:r,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,g=St(h,l);o.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=x(h))}}):null}),Wn=p.forwardRef((t,r)=>{const{sizes:a,onSizesChange:n,...s}=t,o=I(W,t.__scopeScrollArea),[i,l]=p.useState(),u=p.useRef(null),d=ve(r,u,o.onScrollbarXChange);return p.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),e.jsx(Zt,{"data-orientation":"horizontal",...s,ref:d,sizes:a,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ze(a)+"px",...t.style},onThumbPointerDown:c=>t.onThumbPointerDown(c.x),onDragScroll:c=>t.onDragScroll(c.x),onWheelScroll:(c,x)=>{if(o.viewport){const h=o.viewport.scrollLeft+c.deltaX;t.onWheelScroll(h),rr(h,x)&&c.preventDefault()}},onResize:()=>{u.current&&o.viewport&&i&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:$e(i.paddingLeft),paddingEnd:$e(i.paddingRight)}})}})}),zn=p.forwardRef((t,r)=>{const{sizes:a,onSizesChange:n,...s}=t,o=I(W,t.__scopeScrollArea),[i,l]=p.useState(),u=p.useRef(null),d=ve(r,u,o.onScrollbarYChange);return p.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),e.jsx(Zt,{"data-orientation":"vertical",...s,ref:d,sizes:a,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ze(a)+"px",...t.style},onThumbPointerDown:c=>t.onThumbPointerDown(c.y),onDragScroll:c=>t.onDragScroll(c.y),onWheelScroll:(c,x)=>{if(o.viewport){const h=o.viewport.scrollTop+c.deltaY;t.onWheelScroll(h),rr(h,x)&&c.preventDefault()}},onResize:()=>{u.current&&o.viewport&&i&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:$e(i.paddingTop),paddingEnd:$e(i.paddingBottom)}})}})}),[Hn,Gt]=Ht(W),Zt=p.forwardRef((t,r)=>{const{__scopeScrollArea:a,sizes:n,hasThumb:s,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:u,onDragScroll:d,onWheelScroll:c,onResize:x,...h}=t,g=I(W,a),[b,m]=p.useState(null),v=ve(r,T=>m(T)),w=p.useRef(null),A=p.useRef(""),D=g.viewport,_=n.content-n.viewport,f=J(c),S=J(u),V=He(x,10);function E(T){if(w.current){const R=T.clientX-w.current.left,$=T.clientY-w.current.top;d({x:R,y:$})}}return p.useEffect(()=>{const T=R=>{const $=R.target;(b==null?void 0:b.contains($))&&f(R,_)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[D,b,_,f]),p.useEffect(S,[n,S]),be(b,V),be(g.content,V),e.jsx(Hn,{scope:a,scrollbar:b,hasThumb:s,onThumbChange:J(o),onThumbPointerUp:J(i),onThumbPositionChange:S,onThumbPointerDown:J(l),children:e.jsx(Se.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:te(t.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),w.current=b.getBoundingClientRect(),A.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),E(T))}),onPointerMove:te(t.onPointerMove,E),onPointerUp:te(t.onPointerUp,T=>{const R=T.target;R.hasPointerCapture(T.pointerId)&&R.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=A.current,g.viewport&&(g.viewport.style.scrollBehavior=""),w.current=null})})})}),Ie="ScrollAreaThumb",Jt=p.forwardRef((t,r)=>{const{forceMount:a,...n}=t,s=Gt(Ie,t.__scopeScrollArea);return e.jsx(Fe,{present:a||s.hasThumb,children:e.jsx(Yn,{ref:r,...n})})}),Yn=p.forwardRef((t,r)=>{const{__scopeScrollArea:a,style:n,...s}=t,o=I(Ie,a),i=Gt(Ie,a),{onThumbPositionChange:l}=i,u=ve(r,x=>i.onThumbChange(x)),d=p.useRef(void 0),c=He(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const x=o.viewport;if(x){const h=()=>{if(c(),!d.current){const g=qn(x,l);d.current=g,l()}};return l(),x.addEventListener("scroll",h),()=>x.removeEventListener("scroll",h)}},[o.viewport,c,l]),e.jsx(Se.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:te(t.onPointerDownCapture,x=>{const g=x.target.getBoundingClientRect(),b=x.clientX-g.left,m=x.clientY-g.top;i.onThumbPointerDown({x:b,y:m})}),onPointerUp:te(t.onPointerUp,i.onThumbPointerUp)})});Jt.displayName=Ie;var st="ScrollAreaCorner",Qt=p.forwardRef((t,r)=>{const a=I(st,t.__scopeScrollArea),n=!!(a.scrollbarX&&a.scrollbarY);return a.type!=="scroll"&&n?e.jsx(Un,{...t,ref:r}):null});Qt.displayName=st;var Un=p.forwardRef((t,r)=>{const{__scopeScrollArea:a,...n}=t,s=I(st,a),[o,i]=p.useState(0),[l,u]=p.useState(0),d=!!(o&&l);return be(s.scrollbarX,()=>{var x;const c=((x=s.scrollbarX)==null?void 0:x.offsetHeight)||0;s.onCornerHeightChange(c),u(c)}),be(s.scrollbarY,()=>{var x;const c=((x=s.scrollbarY)==null?void 0:x.offsetWidth)||0;s.onCornerWidthChange(c),i(c)}),d?e.jsx(Se.div,{...n,ref:r,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function $e(t){return t?parseInt(t,10):0}function er(t,r){const a=t/r;return isNaN(a)?0:a}function ze(t){const r=er(t.viewport,t.content),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-a)*r;return Math.max(n,18)}function Xn(t,r,a,n="ltr"){const s=ze(a),o=s/2,i=r||o,l=s-i,u=a.scrollbar.paddingStart+i,d=a.scrollbar.size-a.scrollbar.paddingEnd-l,c=a.content-a.viewport,x=n==="ltr"?[0,c]:[c*-1,0];return tr([u,d],x)(t)}function St(t,r,a="ltr"){const n=ze(r),s=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,o=r.scrollbar.size-s,i=r.content-r.viewport,l=o-n,u=a==="ltr"?[0,i]:[i*-1,0],d=mr(t,u);return tr([0,i],[0,l])(d)}function tr(t,r){return a=>{if(t[0]===t[1]||r[0]===r[1])return r[0];const n=(r[1]-r[0])/(t[1]-t[0]);return r[0]+n*(a-t[0])}}function rr(t,r){return t>0&&t<r}var qn=(t,r=()=>{})=>{let a={left:t.scrollLeft,top:t.scrollTop},n=0;return function s(){const o={left:t.scrollLeft,top:t.scrollTop},i=a.left!==o.left,l=a.top!==o.top;(i||l)&&r(),a=o,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function He(t,r){const a=J(t),n=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),p.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(a,r)},[a,r])}function be(t,r){const a=J(r);ur(()=>{let n=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(a)});return s.observe(t),()=>{window.cancelAnimationFrame(n),s.unobserve(t)}}},[t,a])}var nr=Yt,Gn=Xt,Zn=Qt;const ar=p.forwardRef(({className:t,children:r,...a},n)=>e.jsxs(nr,{ref:n,className:At("relative overflow-hidden",t),...a,children:[e.jsx(Gn,{className:"h-full w-full rounded-[inherit]",children:r}),e.jsx(it,{}),e.jsx(Zn,{})]}));ar.displayName=nr.displayName;const it=p.forwardRef(({className:t,orientation:r="vertical",...a},n)=>e.jsx(nt,{ref:n,orientation:r,className:At("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...a,children:e.jsx(Jt,{className:"relative flex-1 rounded-full bg-border"})}));it.displayName=nt.displayName;function sr(t,r,a){const n=[a.join(","),...t.map(i=>a.map(l=>{const u=l.toLowerCase().replace(/ /g,""),d=i[u]??i[l]??"";return typeof d=="string"&&d.includes(",")?`"${d}"`:d}).join(","))].join(`
`),s=new Blob([n],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");o.href=URL.createObjectURL(s),o.download=`${r}.csv`,o.click()}function ir(t,r){const a=document.getElementById(t);if(!a)return;const n=window.open("","_blank");n&&(n.document.write(`
    <!DOCTYPE html>
    <html>
      <head>
        <title>${r}</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 20px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f4f4f4; }
          .header { margin-bottom: 20px; }
          .summary { display: flex; gap: 20px; margin-bottom: 20px; }
          .summary-item { padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
          .credit { color: green; }
          .debit { color: red; }
          @media print { body { -webkit-print-color-adjust: exact; } }
        </style>
      </head>
      <body>
        ${a.innerHTML}
      </body>
    </html>
  `),n.document.close(),n.print())}function Jn(){const[t,r]=p.useState(""),[a,n]=p.useState(()=>{const c=new Date;return c.setMonth(c.getMonth()-1),c.toISOString().split("T")[0]}),[s,o]=p.useState(new Date().toISOString().split("T")[0]);we();const{data:i=[]}=Y({queryKey:["/api/owners"]}),{data:l,isLoading:u}=Y({queryKey:["/api/reports/owner-statement",t,a,s],enabled:!!t}),d=c=>{const x=typeof c=="string"?parseFloat(c)||0:c;return Oe(x)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{children:[e.jsx(M,{children:e.jsx(B,{className:"text-base",children:"Filter Options"})}),e.jsx(y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Owner"}),e.jsxs(ce,{value:t,onValueChange:r,children:[e.jsx(de,{"data-testid":"select-report-owner",children:e.jsx(ue,{placeholder:"Select owner"})}),e.jsx(me,{children:i.map(c=>e.jsx(z,{value:c.id.toString(),children:c.name},c.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Start Date"}),e.jsx(Ee,{type:"date",value:a,onChange:c=>n(c.target.value),"data-testid":"input-report-start-date"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"End Date"}),e.jsx(Ee,{type:"date",value:s,onChange:c=>o(c.target.value),"data-testid":"input-report-end-date"})]})]})})]}),t&&e.jsx(e.Fragment,{children:u?e.jsx(j,{children:e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(re,{className:"h-8 w-48"}),e.jsx(re,{className:"h-40 w-full"})]})})}):l?e.jsx(e.Fragment,{children:e.jsxs(j,{children:[e.jsxs(M,{className:"flex flex-row items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx(B,{className:"text-lg",children:l.owner.name}),e.jsxs(Me,{children:["Statement Period: ",new Date(a).toLocaleDateString()," - ",new Date(s).toLocaleDateString()]})]}),e.jsxs(he,{variant:"outline",size:"sm","data-testid":"button-export-owner-statement",children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Export"]})]}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Rent from Owned Shops"}),e.jsx("p",{className:"text-xl font-semibold tabular-nums text-emerald-600 dark:text-emerald-400",children:d(l.totalRentCollected)})]}),e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share from Common Shops"}),e.jsxs("p",{className:"text-xl font-semibold tabular-nums text-emerald-600 dark:text-emerald-400",children:["+",d(l.shareFromCommonShops)]})]}),e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allocated Expenses"}),e.jsxs("p",{className:"text-xl font-semibold tabular-nums text-destructive",children:["-",d(l.allocatedExpenses)]})]}),e.jsxs("div",{className:"p-4 bg-primary/10 rounded-lg border-2 border-primary/20",children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"Net Payout"}),e.jsx("p",{className:"text-2xl font-bold tabular-nums text-primary",children:d(l.netPayout)})]})]}),e.jsx(Ot,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Bank Deposits Made"]}),l.bankDeposits&&l.bankDeposits.length>0?e.jsxs(Ae,{children:[e.jsx(Pe,{children:e.jsxs(K,{children:[e.jsx(k,{children:"Date"}),e.jsx(k,{children:"Bank"}),e.jsx(k,{children:"Reference"}),e.jsx(k,{className:"text-right",children:"Amount"})]})}),e.jsx(ke,{children:l.bankDeposits.map(c=>e.jsxs(K,{children:[e.jsx(O,{children:new Date(c.date).toLocaleDateString()}),e.jsx(O,{children:c.bankName}),e.jsx(O,{className:"font-mono text-sm",children:c.ref||"-"}),e.jsx(O,{className:"text-right tabular-nums font-medium",children:d(c.amount)})]},c.id))})]}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No deposits recorded in this period"})]})]})})]})}):e.jsx(j,{children:e.jsxs(y,{className:"p-12 text-center",children:[e.jsx(xr,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No data available for the selected period"})]})})})]})}function Qn(){const[t,r]=p.useState("");we();const{data:a=[]}=Y({queryKey:["/api/tenants"]}),{data:n,isLoading:s}=Y({queryKey:["/api/reports/tenant-ledger",t],enabled:!!t}),o=i=>{const l=typeof i=="string"?parseFloat(i)||0:i;return Oe(l)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{children:[e.jsx(M,{children:e.jsx(B,{className:"text-base",children:"Select Tenant"})}),e.jsx(y,{children:e.jsxs(ce,{value:t,onValueChange:r,children:[e.jsx(de,{className:"max-w-sm","data-testid":"select-report-tenant",children:e.jsx(ue,{placeholder:"Select tenant"})}),e.jsx(me,{children:a.map(i=>e.jsxs(z,{value:i.id.toString(),children:[i.name," - ",i.phone]},i.id))})]})})]}),t&&e.jsx(e.Fragment,{children:s?e.jsx(j,{children:e.jsx(y,{className:"p-6",children:e.jsx(re,{className:"h-64 w-full"})})}):n?e.jsxs(j,{children:[e.jsxs(M,{className:"flex flex-row items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx(B,{className:"text-lg",children:n.tenant.name}),e.jsx(Me,{children:"Complete transaction history"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Due"}),e.jsx("p",{className:`text-xl font-bold tabular-nums ${n.tenant.currentDue>0?"text-destructive":"text-emerald-600 dark:text-emerald-400"}`,children:o(n.tenant.currentDue)})]})]}),e.jsx(y,{className:"p-0",children:n.entries&&n.entries.length>0?e.jsxs(Ae,{children:[e.jsx(Pe,{children:e.jsxs(K,{children:[e.jsx(k,{children:"Date"}),e.jsx(k,{children:"Description"}),e.jsx(k,{className:"text-right",children:"Debit (+)"}),e.jsx(k,{className:"text-right",children:"Credit (-)"}),e.jsx(k,{className:"text-right",children:"Balance"})]})}),e.jsx(ke,{children:n.entries.map(i=>e.jsxs(K,{children:[e.jsx(O,{children:new Date(i.date).toLocaleDateString()}),e.jsx(O,{children:i.description}),e.jsx(O,{className:"text-right tabular-nums",children:i.debit>0?e.jsx("span",{className:"text-amber-600 dark:text-amber-400",children:o(i.debit)}):"-"}),e.jsx(O,{className:"text-right tabular-nums",children:i.credit>0?e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:o(i.credit)}):"-"}),e.jsx(O,{className:"text-right tabular-nums font-medium",children:o(i.balance)})]},i.id))})]}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Qe,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No ledger entries"})]})})]}):null})]})}function ea(){we();const{data:t,isLoading:r}=Y({queryKey:["/api/reports/collection"]}),a=i=>{const l=typeof i=="string"?parseFloat(i)||0:i;return Oe(l)},n=["hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))"];if(r)return e.jsx(j,{children:e.jsx(y,{className:"p-6",children:e.jsx(re,{className:"h-96 w-full"})})});const s=(t==null?void 0:t.reduce((i,l)=>({expected:i.expected+l.expected,collected:i.collected+l.collected,pending:i.pending+l.pending}),{expected:0,collected:0,pending:0}))||{expected:0,collected:0,pending:0},o=s.expected>0?(s.collected/s.expected*100).toFixed(1):0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(j,{className:"overflow-visible",children:e.jsxs(y,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expected"}),e.jsx("p",{className:"text-xl font-semibold tabular-nums",children:a(s.expected)})]})}),e.jsx(j,{className:"overflow-visible",children:e.jsxs(y,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Collected"}),e.jsx("p",{className:"text-xl font-semibold tabular-nums text-emerald-600 dark:text-emerald-400",children:a(s.collected)})]})}),e.jsx(j,{className:"overflow-visible",children:e.jsxs(y,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"}),e.jsx("p",{className:"text-xl font-semibold tabular-nums text-amber-600 dark:text-amber-400",children:a(s.pending)})]})}),e.jsx(j,{className:"overflow-visible",children:e.jsxs(y,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Collection Rate"}),e.jsxs("p",{className:"text-xl font-semibold",children:[o,"%"]})]})})]}),e.jsxs(j,{children:[e.jsx(M,{children:e.jsx(B,{className:"text-base",children:"Monthly Collection Trend"})}),e.jsx(y,{children:e.jsx("div",{className:"h-80",children:e.jsx(Lt,{width:"100%",height:"100%",children:e.jsxs(Ir,{data:t||[],margin:{top:10,right:10,left:0,bottom:0},children:[e.jsx($r,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(Fr,{dataKey:"month",tick:{fontSize:12},className:"text-muted-foreground"}),e.jsx(Mr,{tick:{fontSize:12},className:"text-muted-foreground",tickFormatter:i=>`${(i/1e3).toFixed(0)}k`}),e.jsx(It,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"0.5rem"},formatter:i=>[a(i),""]}),e.jsx(Ye,{dataKey:"expected",fill:n[0],name:"Expected",radius:[4,4,0,0]}),e.jsx(Ye,{dataKey:"collected",fill:n[1],name:"Collected",radius:[4,4,0,0]}),e.jsx(Ye,{dataKey:"pending",fill:n[2],name:"Pending",radius:[4,4,0,0]})]})})})})]}),e.jsx(j,{children:e.jsx(y,{className:"p-0",children:e.jsxs(Ae,{children:[e.jsx(Pe,{children:e.jsxs(K,{children:[e.jsx(k,{children:"Month"}),e.jsx(k,{className:"text-right",children:"Expected"}),e.jsx(k,{className:"text-right",children:"Collected"}),e.jsx(k,{className:"text-right",children:"Pending"}),e.jsx(k,{className:"text-right",children:"Rate"})]})}),e.jsx(ke,{children:(t||[]).map(i=>e.jsxs(K,{children:[e.jsx(O,{className:"font-medium",children:i.month}),e.jsx(O,{className:"text-right tabular-nums",children:a(i.expected)}),e.jsx(O,{className:"text-right tabular-nums text-emerald-600 dark:text-emerald-400",children:a(i.collected)}),e.jsx(O,{className:"text-right tabular-nums text-amber-600 dark:text-amber-400",children:a(i.pending)}),e.jsx(O,{className:"text-right",children:e.jsxs(Tt,{variant:"secondary",children:[i.expected>0?(i.collected/i.expected*100).toFixed(0):0,"%"]})})]},i.month))})]})})})]})}const ta=["January","February","March","April","May","June","July","August","September","October","November","December"];function ra(){var v,w,A,D,_;const[t,r]=p.useState("all"),[a,n]=p.useState("all"),[s,o]=p.useState("all"),[i,l]=p.useState(),[u,d]=p.useState();we();const{data:c,isLoading:x}=Y({queryKey:["/api/reports/monthly-deposit-summary",t,a,s,i==null?void 0:i.toISOString(),u==null?void 0:u.toISOString()],queryFn:async()=>{const f=new URLSearchParams;t!=="all"&&f.append("ownerId",t),a!=="all"&&f.append("year",a),s!=="all"&&f.append("month",s),i&&f.append("startDate",mt(i,"yyyy-MM-dd")),u&&f.append("endDate",mt(u,"yyyy-MM-dd"));const S=await fetch(`/api/reports/monthly-deposit-summary?${f}`);if(!S.ok)throw new Error("Failed to fetch report");return S.json()}}),h=f=>{const S=typeof f=="string"?parseFloat(f)||0:f;return Oe(S)},g=((v=c==null?void 0:c.data)==null?void 0:v.reduce((f,S)=>({rentPayments:f.rentPayments+S.rentPayments,securityDeposits:f.securityDeposits+S.securityDeposits,totalDeposit:f.totalDeposit+S.totalDeposit}),{rentPayments:0,securityDeposits:0,totalDeposit:0}))||{rentPayments:0,securityDeposits:0,totalDeposit:0},b=()=>{if(!(c!=null&&c.data))return;const f=c.data.map(S=>({"Owner Name":S.ownerName,Year:S.year,Month:S.monthName,"Rent Payments":S.rentPayments.toFixed(2),"Security Deposits":S.securityDeposits.toFixed(2),"Total Deposit":S.totalDeposit.toFixed(2)}));sr(f,"monthly-deposit-summary",["Owner Name","Year","Month","Rent Payments","Security Deposits","Total Deposit"])},m=()=>{l(void 0),d(void 0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{children:[e.jsx(M,{children:e.jsx(B,{className:"text-base",children:"Filter Options"})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Owner"}),e.jsxs(ce,{value:t,onValueChange:r,children:[e.jsx(de,{children:e.jsx(ue,{placeholder:"All Owners"})}),e.jsxs(me,{children:[e.jsx(z,{value:"all",children:"All Owners"}),(w=c==null?void 0:c.owners)==null?void 0:w.map(f=>e.jsx(z,{value:f.id.toString(),children:f.name},f.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Year"}),e.jsxs(ce,{value:a,onValueChange:n,children:[e.jsx(de,{children:e.jsx(ue,{placeholder:"All Years"})}),e.jsxs(me,{children:[e.jsx(z,{value:"all",children:"All Years"}),(A=c==null?void 0:c.availableYears)==null?void 0:A.map(f=>e.jsx(z,{value:f.toString(),children:f},f))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Month"}),e.jsxs(ce,{value:s,onValueChange:o,children:[e.jsx(de,{children:e.jsx(ue,{placeholder:"All Months"})}),e.jsxs(me,{children:[e.jsx(z,{value:"all",children:"All Months"}),ta.map((f,S)=>e.jsx(z,{value:(S+1).toString(),children:f},S))]})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs(he,{variant:"outline",onClick:b,disabled:!((D=c==null?void 0:c.data)!=null&&D.length),children:[e.jsx($t,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(he,{variant:"outline",onClick:()=>ir("monthly-deposit-report","monthly-deposit-summary"),disabled:!((_=c==null?void 0:c.data)!=null&&_.length),children:[e.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Print"]})]})]}),e.jsx(Ot,{}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-2 block flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Date Range Filter"]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(vr,{startDate:i,endDate:u,onStartDateChange:l,onEndDateChange:d,className:"flex-1"}),(i||u)&&e.jsx(he,{variant:"ghost",size:"sm",onClick:m,children:"Clear"})]})]})]})]}),x?e.jsx(j,{children:e.jsx(y,{className:"p-6",children:e.jsx(re,{className:"h-64 w-full"})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(j,{children:e.jsxs(y,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Rent Payments"}),e.jsx("p",{className:"text-xl font-semibold tabular-nums text-emerald-600 dark:text-emerald-400",children:h(g.rentPayments)})]})}),e.jsx(j,{children:e.jsxs(y,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Security Deposits"}),e.jsx("p",{className:"text-xl font-semibold tabular-nums text-blue-600 dark:text-blue-400",children:h(g.securityDeposits)})]})}),e.jsx(j,{children:e.jsxs(y,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Grand Total"}),e.jsx("p",{className:"text-xl font-semibold tabular-nums text-primary",children:h(g.totalDeposit)})]})})]}),e.jsxs(j,{id:"monthly-deposit-report",children:[e.jsxs(M,{children:[e.jsx(B,{className:"text-base",children:"Monthly Deposit Summary"}),e.jsx(Me,{children:"Rent payments and security deposits grouped by owner, year, and month"})]}),e.jsx(y,{className:"p-0",children:c!=null&&c.data&&c.data.length>0?e.jsxs(Ae,{children:[e.jsx(Pe,{children:e.jsxs(K,{children:[e.jsx(k,{children:"Owner Name"}),e.jsx(k,{children:"Year"}),e.jsx(k,{children:"Month"}),e.jsx(k,{className:"text-right",children:"Rent Payments"}),e.jsx(k,{className:"text-right",children:"Security Deposits"}),e.jsx(k,{className:"text-right",children:"Total Deposit"})]})}),e.jsx(ke,{children:c.data.map((f,S)=>e.jsxs(K,{children:[e.jsx(O,{className:"font-medium",children:f.ownerName}),e.jsx(O,{children:f.year}),e.jsx(O,{children:f.monthName}),e.jsx(O,{className:"text-right tabular-nums text-emerald-600 dark:text-emerald-400",children:h(f.rentPayments)}),e.jsx(O,{className:"text-right tabular-nums text-blue-600 dark:text-blue-400",children:h(f.securityDeposits)}),e.jsx(O,{className:"text-right tabular-nums font-medium",children:h(f.totalDeposit)})]},`${f.ownerId}-${f.year}-${f.month}`))})]}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Ue,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No deposit data available"})]})})]})]})]})}function na(){var x,h,g,b;const[t,r]=p.useState(""),[a,n]=p.useState(()=>{const m=new Date;return m.setFullYear(m.getFullYear()-1),m.toISOString().split("T")[0]}),[s,o]=p.useState(new Date().toISOString().split("T")[0]);we();const{data:i=[]}=Y({queryKey:["/api/owners"]}),{data:l,isLoading:u}=Y({queryKey:["/api/reports/owner-transactions",t,a,s],queryFn:async()=>{const m=new URLSearchParams;m.append("ownerId",t),a&&m.append("startDate",a),s&&m.append("endDate",s);const v=await fetch(`/api/reports/owner-transactions?${m}`);if(!v.ok)throw new Error("Failed to fetch report");return v.json()},enabled:!!t}),d=m=>{const v=typeof m=="string"?parseFloat(m)||0:m;return Oe(v)},c=()=>{if(!(l!=null&&l.transactions))return;const m=l.transactions.map(v=>({Date:new Date(v.date).toLocaleDateString(),Description:v.description,Type:v.type,Category:v.category,Amount:v.amount.toFixed(2),Balance:v.balance.toFixed(2),Shop:v.shopNumber||"",Tenant:v.tenantName||""}));sr(m,`owner-transactions-${l.owner.name}`,["Date","Description","Type","Category","Amount","Balance","Shop","Tenant"])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{children:[e.jsx(M,{children:e.jsx(B,{className:"text-base",children:"Filter Options"})}),e.jsx(y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Owner"}),e.jsxs(ce,{value:t,onValueChange:r,children:[e.jsx(de,{children:e.jsx(ue,{placeholder:"Select owner"})}),e.jsx(me,{children:i.map(m=>e.jsx(z,{value:m.id.toString(),children:m.name},m.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Start Date"}),e.jsx(Ee,{type:"date",value:a,onChange:m=>n(m.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"End Date"}),e.jsx(Ee,{type:"date",value:s,onChange:m=>o(m.target.value)})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs(he,{variant:"outline",onClick:c,disabled:!((x=l==null?void 0:l.transactions)!=null&&x.length),children:[e.jsx($t,{className:"h-4 w-4 mr-2"}),"Excel"]}),e.jsxs(he,{variant:"outline",onClick:()=>{var m;return ir("owner-transactions-report",`owner-transactions-${((m=l==null?void 0:l.owner)==null?void 0:m.name)||"report"}`)},disabled:!((h=l==null?void 0:l.transactions)!=null&&h.length),children:[e.jsx(Ft,{className:"h-4 w-4 mr-2"}),"PDF"]})]})]})})]}),t?u?e.jsx(j,{children:e.jsx(y,{className:"p-6",children:e.jsx(re,{className:"h-64 w-full"})})}):l!=null&&l.summary?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(j,{children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Wr,{className:"h-5 w-5 text-emerald-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Credits"})]}),e.jsx("p",{className:"text-xl font-semibold tabular-nums text-emerald-600 dark:text-emerald-400 mt-1",children:d(l.summary.totalCredits)})]})}),e.jsx(j,{children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kr,{className:"h-5 w-5 text-red-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Debits"})]}),e.jsx("p",{className:"text-xl font-semibold tabular-nums text-red-600 dark:text-red-400 mt-1",children:d(l.summary.totalDebits)})]})}),e.jsx(j,{children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vr,{className:"h-5 w-5 text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Net Balance"})]}),e.jsx("p",{className:`text-xl font-semibold tabular-nums mt-1 ${l.summary.netBalance>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:d(l.summary.netBalance)})]})}),e.jsx(j,{children:e.jsxs(y,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Transactions"}),e.jsx("p",{className:"text-xl font-semibold tabular-nums mt-1",children:((g=l.transactions)==null?void 0:g.length)||0})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(j,{className:"bg-muted/50",children:e.jsxs(y,{className:"p-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rent Payments"}),e.jsx("p",{className:"font-semibold tabular-nums",children:d(l.summary.rentPayments)})]})}),e.jsx(j,{className:"bg-muted/50",children:e.jsxs(y,{className:"p-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Security Deposits"}),e.jsx("p",{className:"font-semibold tabular-nums",children:d(l.summary.securityDeposits)})]})}),e.jsx(j,{className:"bg-muted/50",children:e.jsxs(y,{className:"p-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Common Shop Share"}),e.jsx("p",{className:"font-semibold tabular-nums",children:d(l.summary.commonShopShare)})]})}),e.jsx(j,{className:"bg-muted/50",children:e.jsxs(y,{className:"p-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Expenses"}),e.jsx("p",{className:"font-semibold tabular-nums text-red-600",children:d(l.summary.totalExpenses)})]})})]}),e.jsxs(j,{id:"owner-transactions-report",children:[e.jsxs(M,{children:[e.jsxs(B,{className:"text-base",children:[(b=l.owner)==null?void 0:b.name," - Transaction Details"]}),e.jsxs(Me,{children:["Period: ",new Date(a).toLocaleDateString()," - ",new Date(s).toLocaleDateString()]})]}),e.jsx(y,{className:"p-0",children:l.transactions&&l.transactions.length>0?e.jsxs(Ae,{children:[e.jsx(Pe,{children:e.jsxs(K,{children:[e.jsx(k,{children:"Date"}),e.jsx(k,{children:"Description"}),e.jsx(k,{children:"Category"}),e.jsx(k,{className:"text-right",children:"Credit"}),e.jsx(k,{className:"text-right",children:"Debit"}),e.jsx(k,{className:"text-right",children:"Balance"})]})}),e.jsx(ke,{children:l.transactions.map(m=>e.jsxs(K,{children:[e.jsx(O,{className:"whitespace-nowrap",children:new Date(m.date).toLocaleDateString()}),e.jsx(O,{children:e.jsxs("div",{children:[e.jsx("p",{children:m.description}),m.tenantName&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tenant: ",m.tenantName]})]})}),e.jsx(O,{children:e.jsx(Tt,{variant:"secondary",className:"text-xs",children:m.category})}),e.jsx(O,{className:"text-right tabular-nums",children:m.type==="credit"?e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:d(m.amount)}):"-"}),e.jsx(O,{className:"text-right tabular-nums",children:m.type==="debit"?e.jsx("span",{className:"text-red-600 dark:text-red-400",children:d(m.amount)}):"-"}),e.jsx(O,{className:"text-right tabular-nums font-medium",children:d(m.balance)})]},m.id))})]}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Qe,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No transactions found in this period"})]})})]})]}):null:e.jsx(j,{children:e.jsxs(y,{className:"p-12 text-center",children:[e.jsx(kt,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Select an owner to view transaction details"})]})})]})}function aa(){const{data:t,isLoading:r}=Y({queryKey:["/api/reports/shop-availability"]});if(r)return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(s=>e.jsx(j,{children:e.jsx(y,{className:"p-6",children:e.jsx(re,{className:"h-48 w-full"})})},s))});const a=(t==null?void 0:t.reduce((s,o)=>({total:s.total+o.shops.length,occupied:s.occupied+o.shops.filter(i=>i.status==="occupied").length,vacant:s.vacant+o.shops.filter(i=>i.status==="vacant").length}),{total:0,occupied:0,vacant:0}))||{total:0,occupied:0,vacant:0},n=[{name:"Occupied",value:a.occupied,color:"hsl(142, 76%, 36%)"},{name:"Vacant",value:a.vacant,color:"hsl(221, 83%, 53%)"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(j,{className:"overflow-visible",children:e.jsxs(y,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Shops"}),e.jsx("p",{className:"text-2xl font-semibold",children:a.total})]})}),e.jsx(j,{className:"overflow-visible",children:e.jsxs(y,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Occupied"}),e.jsx("p",{className:"text-2xl font-semibold text-emerald-600 dark:text-emerald-400",children:a.occupied})]})}),e.jsx(j,{className:"overflow-visible",children:e.jsxs(y,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Vacant"}),e.jsx("p",{className:"text-2xl font-semibold text-blue-600 dark:text-blue-400",children:a.vacant})]})}),e.jsx(j,{className:"overflow-visible",children:e.jsxs(y,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Occupancy Rate"}),e.jsxs("p",{className:"text-2xl font-semibold",children:[a.total>0?(a.occupied/a.total*100).toFixed(1):0,"%"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(j,{className:"lg:col-span-1",children:[e.jsx(M,{children:e.jsx(B,{className:"text-base",children:"Occupancy Overview"})}),e.jsx(y,{children:e.jsx("div",{className:"h-64",children:e.jsx(Lt,{width:"100%",height:"100%",children:e.jsxs(Fn,{children:[e.jsx(U,{data:n,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:n.map((s,o)=>e.jsx(_t,{fill:s.color},`cell-${o}`))}),e.jsx(Br,{}),e.jsx(It,{})]})})})})]}),e.jsxs(j,{className:"lg:col-span-2",children:[e.jsx(M,{children:e.jsx(B,{className:"text-base",children:"Shops by Floor"})}),e.jsx(y,{children:e.jsx("div",{className:"space-y-6",children:(t||[]).map(s=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:fr(s.floor)}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.shops.filter(o=>o.status==="occupied").length,"/",s.shops.length," occupied"]})]}),e.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 gap-2",children:s.shops.map(o=>e.jsx("div",{className:`aspect-square rounded-md flex items-center justify-center text-xs font-medium cursor-default ${o.status==="occupied"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,title:`Shop ${o.shopNumber} - ${o.status}${o.ownerName?` (${o.ownerName})`:" (Common)"}`,"data-testid":`shop-availability-${o.id}`,children:o.shopNumber},o.id))})]},s.floor))})})]})]})]})}function pa(){return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Reports"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive financial and operational reports"})]}),e.jsxs(gr,{defaultValue:"monthly-deposit",children:[e.jsxs(ar,{className:"w-full",children:[e.jsxs(br,{className:"inline-flex w-max",children:[e.jsxs(ne,{value:"monthly-deposit","data-testid":"tab-monthly-deposit",children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Monthly Deposits"]}),e.jsxs(ne,{value:"owner-transactions","data-testid":"tab-owner-transactions",children:[e.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Owner Transactions"]}),e.jsxs(ne,{value:"owner-statement","data-testid":"tab-owner-statement",children:[e.jsx(kt,{className:"h-4 w-4 mr-2"}),"Owner Statement"]}),e.jsxs(ne,{value:"tenant-ledger","data-testid":"tab-tenant-ledger",children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Tenant Ledger"]}),e.jsxs(ne,{value:"collection","data-testid":"tab-collection",children:[e.jsx(hr,{className:"h-4 w-4 mr-2"}),"Collection Report"]}),e.jsxs(ne,{value:"availability","data-testid":"tab-availability",children:[e.jsx(pr,{className:"h-4 w-4 mr-2"}),"Shop Availability"]})]}),e.jsx(it,{orientation:"horizontal"})]}),e.jsx(ae,{value:"monthly-deposit",className:"mt-6",children:e.jsx(ra,{})}),e.jsx(ae,{value:"owner-transactions",className:"mt-6",children:e.jsx(na,{})}),e.jsx(ae,{value:"owner-statement",className:"mt-6",children:e.jsx(Jn,{})}),e.jsx(ae,{value:"tenant-ledger",className:"mt-6",children:e.jsx(Qn,{})}),e.jsx(ae,{value:"collection",className:"mt-6",children:e.jsx(ea,{})}),e.jsx(ae,{value:"availability",className:"mt-6",children:e.jsx(aa,{})})]})]})}export{pa as default};
